---
date: 2024-06-13
draft: false
title: Hash
categories:
    - COMP90077
tags: 
    - Data Structure
---

- 喜欢很少更新数据的情况，static dictionary search


## Univeral Hashing

通用哈希函数族具有以下性质：

如果我们从哈希函数族 H 中均匀随机地选择一个哈希函数 h，那么对于 U 中的每一对不同的元素 x 和 y，x 和 y 在 h 下发生冲突的概率满足：

$Pr_{h \in H}[h(x) = h(y)] \leq \frac{1}{m}$

这里，$Pr_{h \in H}[h(x) = h(y)]$ 表示在哈希函数族 H 中选择的哈希函数 h 使得 x 和 y 发生冲突的概率，m 是哈希表的大小。

给定一个包含 n 个元素的集合 S，我们从一个通用的函数族 H 中均匀随机地选择一个哈希函数 h，我们可以达到以下效果：

- 预处理时间：最坏情况下为 O(n + m)；
- 空间消耗：最坏情况下为 O(n + m)；
- 查询时间：期望为 O(1 + n/m)。找到哈希值的时间为 O(1)，解决冲突的时间为 O(n/m)，比如遍历桶中元素，平均有n/m个。

如上所述，m 控制了空间消耗和期望查询时间之间的权衡。

当 m = Θ(n) 时，空间消耗为 O(n)，期望查询时间为 O(1)。

### when $m = n$

- 查询时间：O(1)，expected

### when $m = n^2$

理论上此时碰撞期望小于1。

- 预处理时间：O(n^2)
- 空间消耗：O(n^2)
- 查询时间：O(1)，worst case

## Perfect Hashing

两层的哈希表，第一层用于解决冲突，第二层用于存储数据。

第一层m=n，第二层m=n^2。

- 预处理时间：O(n)
- 空间消耗：O(n)
- 查询时间：O(1)，worst case

## Cuckoo Hashing

布谷鸟，k个表，插值时，如果发生冲突，就把原来的元素挤出去，直到找到空位。

- 插入时间：期望为 O(1)
- 删除时间：最坏情况下为 O(1)
- 查询时间：最坏情况下为 O(1)
- 构建时间：期望为 O(n)
- 空间消耗：最坏情况下为 O(n)